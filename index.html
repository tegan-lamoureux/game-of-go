<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />


	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="http://localhost:8080/socket.io/socket.io.js"></script>
		<link rel="stylesheet" type="text/css" href="css/board.css"/>
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.0/css/bootstrap.min.css"/>
</head>

<body>
	<div class="container">

		<!-- Header row. -->
		<div class="row align-items-end">
			<div class="col-sm">
				<h3>Go!</h3>
			</div>
			<div class="col-sm">
				your color: <p class="colorDisplay"></p>
				current turn: <p class="turnDisplay"></p>
			</div>
			<div class="col-sm">
				<label for="colorSelect">Choose a color:</label>
        <select id="colorSelect">
            <option value="">--Please choose a color--</option>
            <option value="black">Black</option>
            <option value="white">White</option>
        </select>

        <br>
        <input id="test" type="button" value="player move" class='boardPosition'>

			</div>
		</div>

		<br><br>

		<!-- Game board. -->
		<!-- I didn't write this by hand: https://www.tablesgenerator.com/html_tables -->
		<div class="row">
			<div class="col-xl tg-wrap">
				<table class="tg">
					<tr>
						<td class="board" id="19-1">19,1</td>
						<td class="board" id="19-2">19,2</td>
						<td class="board" id="19-3">19,3</td>
						<td class="board" id="19-4">19,4</td>
						<td class="board" id="19-5">19,5</td>
						<td class="board" id="19-6">19,6</td>
						<td class="board" id="19-7">19,7</td>
						<td class="board" id="19-8">19,8</td>
						<td class="board" id="19-9">19,9</td>
						<td class="board" id="19-10">19,10</td>
						<td class="board" id="19-11">19,11</td>
						<td class="board" id="19-12">19,12</td>
						<td class="board" id="19-13">19,13</td>
						<td class="board" id="19-14">19,14</td>
						<td class="board" id="19-15">19,15</td>
						<td class="board" id="19-16">19,16</td>
						<td class="board" id="19-17">19,17</td>
						<td class="board" id="19-18">19,18</td>
						<td class="board" id="19-19">19,19</td>
					</tr>
					<tr>
						<td class="board" id="18-1">18,1</td>
						<td class="board" id="18-2">18,2</td>
						<td class="board" id="18-3">18,3</td>
						<td class="board" id="18-4">18,4</td>
						<td class="board" id="18-5">18,5</td>
						<td class="board" id="18-6">18,6</td>
						<td class="board" id="18-7">18,7</td>
						<td class="board" id="18-8">18,8</td>
						<td class="board" id="18-9">18,9</td>
						<td class="board" id="18-10">18,10</td>
						<td class="board" id="18-11">18,11</td>
						<td class="board" id="18-12">18,12</td>
						<td class="board" id="18-13">18,13</td>
						<td class="board" id="18-14">18,14</td>
						<td class="board" id="18-15">18,15</td>
						<td class="board" id="18-16">18,16</td>
						<td class="board" id="18-17">18,17</td>
						<td class="board" id="18-18">18,18</td>
						<td class="board" id="18-19">18,19</td>
					</tr>
					<tr>
						<td class="board" id="17-1">17,1</td>
						<td class="board" id="17-2">17,2</td>
						<td class="board" id="17-3">17,3</td>
						<td class="board" id="17-4">17,4</td>
						<td class="board" id="17-5">17,5</td>
						<td class="board" id="17-6">17,6</td>
						<td class="board" id="17-7">17,7</td>
						<td class="board" id="17-8">17,8</td>
						<td class="board" id="17-9">17,9</td>
						<td class="board" id="17-10">17,10</td>
						<td class="board" id="17-11">17,11</td>
						<td class="board" id="17-12">17,12</td>
						<td class="board" id="17-13">17,13</td>
						<td class="board" id="17-14">17,14</td>
						<td class="board" id="17-15">17,15</td>
						<td class="board" id="17-16">17,16</td>
						<td class="board" id="17-17">17,17</td>
						<td class="board" id="17-18">17,18</td>
						<td class="board" id="17-19">17,19</td>
					</tr>
					<tr>
						<td class="board" id="16-1">16,1</td>
						<td class="board" id="16-2">16,2</td>
						<td class="board" id="16-3">16,3</td>
						<td class="board" id="16-4">16,4</td>
						<td class="board" id="16-5">16,5</td>
						<td class="board" id="16-6">16,6</td>
						<td class="board" id="16-7">16,7</td>
						<td class="board" id="16-8">16,8</td>
						<td class="board" id="16-9">16,9</td>
						<td class="board" id="16-10">16,10</td>
						<td class="board" id="16-11">16,11</td>
						<td class="board" id="16-12">16,12</td>
						<td class="board" id="16-13">16,13</td>
						<td class="board" id="16-14">16,14</td>
						<td class="board" id="16-15">16,15</td>
						<td class="board" id="16-16">16,16</td>
						<td class="board" id="16-17">16,17</td>
						<td class="board" id="16-18">16,18</td>
						<td class="board" id="16-19">16,19</td>
					</tr>
					<tr>
						<td class="board" id="15-1">15,1</td>
						<td class="board" id="15-2">15,2</td>
						<td class="board" id="15-3">15,3</td>
						<td class="board" id="15-4">15,4</td>
						<td class="board" id="15-5">15,5</td>
						<td class="board" id="15-6">15,6</td>
						<td class="board" id="15-7">15,7</td>
						<td class="board" id="15-8">15,8</td>
						<td class="board" id="15-9">15,9</td>
						<td class="board" id="15-10">15,10</td>
						<td class="board" id="15-11">15,11</td>
						<td class="board" id="15-12">15,12</td>
						<td class="board" id="15-13">15,13</td>
						<td class="board" id="15-14">15,14</td>
						<td class="board" id="15-15">15,15</td>
						<td class="board" id="15-16">15,16</td>
						<td class="board" id="15-17">15,17</td>
						<td class="board" id="15-18">15,18</td>
						<td class="board" id="15-19">15,19</td>
					</tr>
					<tr>
						<td class="board" id="14-1">14,1</td>
						<td class="board" id="14-2">14,2</td>
						<td class="board" id="14-3">14,3</td>
						<td class="board" id="14-4">14,4</td>
						<td class="board" id="14-5">14,5</td>
						<td class="board" id="14-6">14,6</td>
						<td class="board" id="14-7">14,7</td>
						<td class="board" id="14-8">14,8</td>
						<td class="board" id="14-9">14,9</td>
						<td class="board" id="14-10">14,10</td>
						<td class="board" id="14-11">14,11</td>
						<td class="board" id="14-12">14,12</td>
						<td class="board" id="14-13">14,13</td>
						<td class="board" id="14-14">14,14</td>
						<td class="board" id="14-15">14,15</td>
						<td class="board" id="14-16">14,16</td>
						<td class="board" id="14-17">14,17</td>
						<td class="board" id="14-18">14,18</td>
						<td class="board" id="14-19">14,19</td>
					</tr>
					<tr>
						<td class="board" id="13-1">13,1</td>
						<td class="board" id="13-2">13,2</td>
						<td class="board" id="13-3">13,3</td>
						<td class="board" id="13-4">13,4</td>
						<td class="board" id="13-5">13,5</td>
						<td class="board" id="13-6">13,6</td>
						<td class="board" id="13-7">13,7</td>
						<td class="board" id="13-8">13,8</td>
						<td class="board" id="13-9">13,9</td>
						<td class="board" id="13-10">13,10</td>
						<td class="board" id="13-11">13,11</td>
						<td class="board" id="13-12">13,12</td>
						<td class="board" id="13-13">13,13</td>
						<td class="board" id="13-14">13,14</td>
						<td class="board" id="13-15">13,15</td>
						<td class="board" id="13-16">13,16</td>
						<td class="board" id="13-17">13,17</td>
						<td class="board" id="13-18">13,18</td>
						<td class="board" id="13-19">13,19</td>
					</tr>
					<tr>
						<td class="board" id="12-1">12,1</td>
						<td class="board" id="12-2">12,2</td>
						<td class="board" id="12-3">12,3</td>
						<td class="board" id="12-4">12,4</td>
						<td class="board" id="12-5">12,5</td>
						<td class="board" id="12-6">12,6</td>
						<td class="board" id="12-7">12,7</td>
						<td class="board" id="12-8">12,8</td>
						<td class="board" id="12-9">12,9</td>
						<td class="board" id="12-10">12,10</td>
						<td class="board" id="12-11">12,11</td>
						<td class="board" id="12-12">12,12</td>
						<td class="board" id="12-13">12,13</td>
						<td class="board" id="12-14">12,14</td>
						<td class="board" id="12-15">12,15</td>
						<td class="board" id="12-16">12,16</td>
						<td class="board" id="12-17">12,17</td>
						<td class="board" id="12-18">12,18</td>
						<td class="board" id="12-19">12,19</td>
					</tr>
					<tr>
						<td class="board" id="11-1">11,1</td>
						<td class="board" id="11-2">11,2</td>
						<td class="board" id="11-3">11,3</td>
						<td class="board" id="11-4">11,4</td>
						<td class="board" id="11-5">11,5</td>
						<td class="board" id="11-6">11,6</td>
						<td class="board" id="11-7">11,7</td>
						<td class="board" id="11-8">11,8</td>
						<td class="board" id="11-9">11,9</td>
						<td class="board" id="11-10">11,10</td>
						<td class="board" id="11-11">11,11</td>
						<td class="board" id="11-12">11,12</td>
						<td class="board" id="11-13">11,13</td>
						<td class="board" id="11-14">11,14</td>
						<td class="board" id="11-15">11,15</td>
						<td class="board" id="11-16">11,16</td>
						<td class="board" id="11-17">11,17</td>
						<td class="board" id="11-18">11,18</td>
						<td class="board" id="11-19">11,19</td>
					</tr>
					<tr>
						<td class="board" id="10-1">10,1</td>
						<td class="board" id="10-2">10,2</td>
						<td class="board" id="10-3">10,3</td>
						<td class="board" id="10-4">10,4</td>
						<td class="board" id="10-5">10,5</td>
						<td class="board" id="10-6">10,6</td>
						<td class="board" id="10-7">10,7</td>
						<td class="board" id="10-8">10,8</td>
						<td class="board" id="10-9">10,9</td>
						<td class="board" id="10-10">10,10</td>
						<td class="board" id="10-11">10,11</td>
						<td class="board" id="10-12">10,12</td>
						<td class="board" id="10-13">10,13</td>
						<td class="board" id="10-14">10,14</td>
						<td class="board" id="10-15">10,15</td>
						<td class="board" id="10-16">10,16</td>
						<td class="board" id="10-17">10,17</td>
						<td class="board" id="10-18">10,18</td>
						<td class="board" id="10-19">10,19</td>
					</tr>
					<tr>
						<td class="board" id="9-1">9,1</td>
						<td class="board" id="9-2">9,2</td>
						<td class="board" id="9-3">9,3</td>
						<td class="board" id="9-4">9,4</td>
						<td class="board" id="9-5">9,5</td>
						<td class="board" id="9-6">9,6</td>
						<td class="board" id="9-7">9,7</td>
						<td class="board" id="9-8">9,8</td>
						<td class="board" id="9-9">9,9</td>
						<td class="board" id="9-10">9,10</td>
						<td class="board" id="9-11">9,11</td>
						<td class="board" id="9-12">9,12</td>
						<td class="board" id="9-13">9,13</td>
						<td class="board" id="9-14">9,14</td>
						<td class="board" id="9-15">9,15</td>
						<td class="board" id="9-16">9,16</td>
						<td class="board" id="9-17">9,17</td>
						<td class="board" id="9-18">9,18</td>
						<td class="board" id="9-19">9,19</td>
					</tr>
					<tr>
						<td class="board" id="8-1">8,1</td>
						<td class="board" id="8-2">8,2</td>
						<td class="board" id="8-3">8,3</td>
						<td class="board" id="8-4">8,4</td>
						<td class="board" id="8-5">8,5</td>
						<td class="board" id="8-6">8,6</td>
						<td class="board" id="8-7">8,7</td>
						<td class="board" id="8-8">8,8</td>
						<td class="board" id="8-9">8,9</td>
						<td class="board" id="8-10">8,10</td>
						<td class="board" id="8-11">8,11</td>
						<td class="board" id="8-12">8,12</td>
						<td class="board" id="8-13">8,13</td>
						<td class="board" id="8-14">8,14</td>
						<td class="board" id="8-15">8,15</td>
						<td class="board" id="8-16">8,16</td>
						<td class="board" id="8-17">8,17</td>
						<td class="board" id="8-18">8,18</td>
						<td class="board" id="8-19">8,19</td>
					</tr>
					<tr>
						<td class="board" id="7-1">7,1</td>
						<td class="board" id="7-2">7,2</td>
						<td class="board" id="7-3">7,3</td>
						<td class="board" id="7-4">7,4</td>
						<td class="board" id="7-5">7,5</td>
						<td class="board" id="7-6">7,6</td>
						<td class="board" id="7-7">7,7</td>
						<td class="board" id="7-8">7,8</td>
						<td class="board" id="7-9">7,9</td>
						<td class="board" id="7-10">7,10</td>
						<td class="board" id="7-11">7,11</td>
						<td class="board" id="7-12">7,12</td>
						<td class="board" id="7-13">7,13</td>
						<td class="board" id="7-14">7,14</td>
						<td class="board" id="7-15">7,15</td>
						<td class="board" id="7-16">7,16</td>
						<td class="board" id="7-17">7,17</td>
						<td class="board" id="7-18">7,18</td>
						<td class="board" id="7-19">7,19</td>
					</tr>
					<tr>
						<td class="board" id="6-1">6,1</td>
						<td class="board" id="6-2">6,2</td>
						<td class="board" id="6-3">6,3</td>
						<td class="board" id="6-4">6,4</td>
						<td class="board" id="6-5">6,5</td>
						<td class="board" id="6-6">6,6</td>
						<td class="board" id="6-7">6,7</td>
						<td class="board" id="6-8">6,8</td>
						<td class="board" id="6-9">6,9</td>
						<td class="board" id="6-10">6,10</td>
						<td class="board" id="6-11">6,11</td>
						<td class="board" id="6-12">6,12</td>
						<td class="board" id="6-13">6,13</td>
						<td class="board" id="6-14">6,14</td>
						<td class="board" id="6-15">6,15</td>
						<td class="board" id="6-16">6,16</td>
						<td class="board" id="6-17">6,17</td>
						<td class="board" id="6-18">6,18</td>
						<td class="board" id="6-19">6,19</td>
					</tr>
					<tr>
						<td class="board" id="5-1">5,1</td>
						<td class="board" id="5-2">5,2</td>
						<td class="board" id="5-3">5,3</td>
						<td class="board" id="5-4">5,4</td>
						<td class="board" id="5-5">5,5</td>
						<td class="board" id="5-6">5,6</td>
						<td class="board" id="5-7">5,7</td>
						<td class="board" id="5-8">5,8</td>
						<td class="board" id="5-9">5,9</td>
						<td class="board" id="5-10">5,10</td>
						<td class="board" id="5-11">5,11</td>
						<td class="board" id="5-12">5,12</td>
						<td class="board" id="5-13">5,13</td>
						<td class="board" id="5-14">5,14</td>
						<td class="board" id="5-15">5,15</td>
						<td class="board" id="5-16">5,16</td>
						<td class="board" id="5-17">5,17</td>
						<td class="board" id="5-18">5,18</td>
						<td class="board" id="5-19">5,19</td>
					</tr>
					<tr>
						<td class="board" id="4-1">4,1</td>
						<td class="board" id="4-2">4,2</td>
						<td class="board" id="4-3">4,3</td>
						<td class="board" id="4-4">4,4</td>
						<td class="board" id="4-5">4,5</td>
						<td class="board" id="4-6">4,6</td>
						<td class="board" id="4-7">4,7</td>
						<td class="board" id="4-8">4,8</td>
						<td class="board" id="4-9">4,9</td>
						<td class="board" id="4-10">4,10</td>
						<td class="board" id="4-11">4,11</td>
						<td class="board" id="4-12">4,12</td>
						<td class="board" id="4-13">4,13</td>
						<td class="board" id="4-14">4,14</td>
						<td class="board" id="4-15">4,15</td>
						<td class="board" id="4-16">4,16</td>
						<td class="board" id="4-17">4,17</td>
						<td class="board" id="4-18">4,18</td>
						<td class="board" id="4-19">4,19</td>
					</tr>
					<tr>
						<td class="board" id="3-1">3,1</td>
						<td class="board" id="3-2">3,2</td>
						<td class="board" id="3-3">3,3</td>
						<td class="board" id="3-4">3,4</td>
						<td class="board" id="3-5">3,5</td>
						<td class="board" id="3-6">3,6</td>
						<td class="board" id="3-7">3,7</td>
						<td class="board" id="3-8">3,8</td>
						<td class="board" id="3-9">3,9</td>
						<td class="board" id="3-10">3,10</td>
						<td class="board" id="3-11">3,11</td>
						<td class="board" id="3-12">3,12</td>
						<td class="board" id="3-13">3,13</td>
						<td class="board" id="3-14">3,14</td>
						<td class="board" id="3-15">3,15</td>
						<td class="board" id="3-16">3,16</td>
						<td class="board" id="3-17">3,17</td>
						<td class="board" id="3-18">3,18</td>
						<td class="board" id="3-19">3,19</td>
					</tr>
					<tr>
						<td class="board" id="2-1">2,1</td>
						<td class="board" id="2-2">2,2</td>
						<td class="board" id="2-3">2,3</td>
						<td class="board" id="2-4">2,4</td>
						<td class="board" id="2-5">2,5</td>
						<td class="board" id="2-6">2,6</td>
						<td class="board" id="2-7">2,7</td>
						<td class="board" id="2-8">2,8</td>
						<td class="board" id="2-9">2,9</td>
						<td class="board" id="2-10">2,10</td>
						<td class="board" id="2-11">2,11</td>
						<td class="board" id="2-12">2,12</td>
						<td class="board" id="2-13">2,13</td>
						<td class="board" id="2-14">2,14</td>
						<td class="board" id="2-15">2,15</td>
						<td class="board" id="2-16">2,16</td>
						<td class="board" id="2-17">2,17</td>
						<td class="board" id="2-18">2,18</td>
						<td class="board" id="2-19">2,19</td>
					</tr>
					<tr>
						<td class="board" id="1-1">1,1</td>
						<td class="board" id="1-2">1,2</td>
						<td class="board" id="1-3">1,3</td>
						<td class="board" id="1-4">1,4</td>
						<td class="board" id="1-5">1,5</td>
						<td class="board" id="1-6">1,6</td>
						<td class="board" id="1-7">1,7</td>
						<td class="board" id="1-8">1,8</td>
						<td class="board" id="1-9">1,9</td>
						<td class="board" id="1-10">1,10</td>
						<td class="board" id="1-11">1,11</td>
						<td class="board" id="1-12">1,12</td>
						<td class="board" id="1-13">1,13</td>
						<td class="board" id="1-14">1,14</td>
						<td class="board" id="1-15">1,15</td>
						<td class="board" id="1-16">1,16</td>
						<td class="board" id="1-17">1,17</td>
						<td class="board" id="1-18">1,18</td>
						<td class="board" id="1-19">1,19</td>
					</tr>
				</table></div>
			</div>

		</div>

		<br><br>
		Sample stones:<br><br>
			<!--img class="draggable" src="images/black.png" width="75px" height="75px"/-->
			<div id="1" class="draggable-black"></div>
			<div id="2" class="draggable-white"></div>


			<script type="text/javascript">
					var curTurn='black';
					var color=null;
					var objectSocket = io.connect('http://localhost:8080/'); // do not change this line

					size=19
					positions={};var coord='';
					for(var i=1; i<size+1; i=i+1){
						for(var j=1; j<size+1; j=j+1){
							coord=i.toString() + '-' + j.toString();
							console.log(coord)
							positions[coord]=0;
						}
					}

					$('.turnDisplay').html('--');
					$('.colorDisplay').html('--');

					$('.boardPosition').on('click', function(event){
						console.log('before emit')
						console.log(curTurn, stones);

						objectSocket.emit('moveEvent', {
								'turn':curTurn,
								'stonePositions':positions
						});
					});

					$('.board').on('click', function(event){
						console.log('checking:' + curTurn + ' vs ' + color);
						if (curTurn == color || curTurn == undefined) {
							console.log('board click!')
							console.log($(this).attr('id'));

							if (color == 'black') {
								positions[$(this).attr('id')] = 1;
							}
							else {
								positions[$(this).attr('id')] = 2;
							}

							objectSocket.emit('moveEvent', {
								'turn':curTurn,
								'stonePositions':positions
							});
						}
						else {
							alert("It's not your turn.");
						}
					});

					objectSocket.on('moveEvent', function(objectData){
							console.log(objectData);

							//update board with objectData sent by server
							curTurn=objectData.turn;
							positions = Object.assign({}, objectData.stonePositions);

							$('.turnDisplay').html(curTurn);
					});

					$('#colorSelect').change('click', function(){
							var selectedColor= $(this).children("option:selected").val();
							console.log(selectedColor)
							//emit color choice
							objectSocket.emit('colorChoiceEvent', {
									'colorChoice':selectedColor,
									'currentColor': color,
							});
					});

					objectSocket.on('assignColorEvent', function(objectData){
							console.log(`assignedColor is ${objectData}`);
							//update board with objectData sent by server
							color= objectData;
							$('.colorDisplay').html(color);
					});
			</script>
</body>
</html>
